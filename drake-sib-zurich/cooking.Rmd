---
title: "cooking"
author: "Kirill MÃ¼ller"
date: "Zurich, 2018-03-05"
output:
  xaringan::moon_reader:
    lib_dir: docs/libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
options(width = 66)
library(magrittr)
knitr::opts_chunk$set(collapse = TRUE)

options(crayon.enabled = TRUE)
knitr::opts_chunk$set(collapse = TRUE, comment = pillar::style_subtle("#>"))

pre_chunk <- function() {
  function(x, options) {
    gsub(
      sprintf('</code>\n<code class="remark-code %s">', tolower(options$engine)),
      "\n",
      x,
      fixed = TRUE
    )
  }
}

colourise_chunk <- function(type) {
  function(x, options) {
    x <- gsub(getwd(), "...", x, fixed = TRUE)

    ansi <- ansistrings::ansi_to_html(
      gsub(" ", "&nbsp;", htmltools::htmlEscape(x)),
      fullpage = FALSE
    )

    sprintf('<code class="remark-code %s"><div class="remark-code-line">%s</div></code>\n',
      tolower(options$engine),
      strsplit(ansi, "\n", fixed = TRUE)[[1]]
    )
  }
}

knitr::knit_hooks$set(
  chunk = pre_chunk(),
  output = colourise_chunk("output"),
  message = colourise_chunk("message"),
  warning = colourise_chunk("warning"),
  error = colourise_chunk("error")
)
```

# The *cooking* package

https://krlmlr.github.io/cooking

https://krlmlr.github.io/cooking/reference/cooking-package.html

```{r api, eval = FALSE}
buy(what, from = supermarket())

supermarket()

peel(what, ...)

chop(what, ...)

fry(what, ...)

cook(what, ...)

combine(..., name = "ragout")

make_cooking(processed)
```

---

# Recipe snippets

```{r example}
library(cooking)
chopped_meat <- chop("raw_meat.csv")
chopped_meat
fry(chopped_meat, with = "vegetables")
peel(buy("carrots"))
```

---

# The pipe

```{r pipe}
"carrots" %>%
  buy() %>%
  peel() %>%
  chop() %>%
  fry(with = c("oil", "garlic", "chopped meat")) %>%
  combine("mashed potatoes")
```

---

# New methods

```{r make}
dice <- make_cooking("diced", "cut from")
dice("tomatoes")
```

---

background-image: url(dots/detailed.png)
background-size: contain
background-position: 0% 90%

# Exercises

1. Use `buy()` to buy meat
2. Chop this meat
3. Fry the chopped meat with oil
4. Combine the fried meat with vegetables
5. Add a salad
